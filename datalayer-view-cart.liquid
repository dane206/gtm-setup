<script>
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    'event': 'view_cart',
    'ecommerce': {
      'currency': '{{ cart.currency }}',
      'value': '{{ product.price | money_without_currency | replace: ',', '' }}',
      'items': [
        {% for item in cart.items %}
        {
        'item_id': '{{ product.id }}',
        'item_name': '{{ product.title | escape }}',
        'item_category': '{{ product.type | escape }}',  
        'item_variant': '{{ product.variants.first | escape }}',
        'price': '{{ product.price | money_without_currency | replace: ',', '' }}',
        'quantity': 1
        }
        {% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
  });
</script>
