<script>
  window.dataLayer = window.dataLayer || [];

  // Only push promotion data if UTM parameters are present
  var urlParams = new URLSearchParams(window.location.search);
  if (urlParams.has('utm_campaign') && urlParams.has('utm_source') && urlParams.has('utm_medium')) {
    window.dataLayer.push({
      'event': 'view_promotion',
      'ecommerce': {
        'promotions': [{
          'promotion_id': urlParams.get('utm_campaign'),  // Using the UTM campaign as the promotion ID
          'promotion_name': urlParams.get('utm_campaign'),  // Using UTM campaign as the promotion name
          'creative_name': urlParams.get('utm_source'),  // Using UTM source to track the source of the promotion
          'position': 'email_campaign'  // Hardcoded to represent that the promotion is from an email
        }]
      }
    });
  }
</script>
